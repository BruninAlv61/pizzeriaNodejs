<h1>Editando {{producto.nombreProducto}}</h1>
<form id="editForm">
    <input type="hidden" name="id" value="{{producto._id}}">
    <input type="text" name="nombreProducto" value="{{producto.nombreProducto}}" placeholder="Nombre del producto">
    <select name="categoria">
        <option value="pizza" {{#if (eq producto.categoria "pizza")}}selected{{/if}}>Pizzas</option>
        <option value="hamburguesa" {{#if (eq producto.categoria "hamburguesa")}}selected{{/if}}>Hamburguesas</option>
        <option value="bebida" {{#if (eq producto.categoria "bebida")}}selected{{/if}}>Bebidas</option>
        <option value="postre" {{#if (eq producto.categoria "postre")}}selected{{/if}}>Postres</option>
    </select>
    <input type="number" name="precio" value="{{producto.precio}}" placeholder="Precio" step="0.01" required>
    <input type="text" name="imagen" value="{{producto.imagen}}" placeholder="URL imagen">
    <button type="submit">Guardar cambios</button>
</form>

<script>
  document.getElementById('editForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const formData = new FormData(e.target);
    const id = formData.get('id');
    
    const data = {
      nombreProducto: formData.get('nombreProducto'),
      categoria: formData.get('categoria'),
      precio: parseFloat(formData.get('precio')),
      imagen: formData.get('imagen')
    };

    const res = await fetch(`/menu/${id}`, {
      method: 'PATCH',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });

    if (res.ok) {
      alert('Producto actualizado correctamente');
      window.location.href = '/menu'; // Redirige de vuelta al men√∫
    } else {
      alert('Error al actualizar el producto');
    }
  });
</script>
